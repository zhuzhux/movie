<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
    <title></title>
    <script src="js/mui.min.js"></script>
    <script src="js/jquery.js"></script>
    <link href="css/mui.min.css" rel="stylesheet"/>
    
    <style>
    	body{max-width: 640px;margin: 0 auto;}
    </style>
    <style>
		.mui-control-content {
			background-color: white;
			min-height: 1015px;
		}
		.mui-control-content .mui-loading {
			margin-top: 50px;
		}
	</style>
</head>
<body>
	
	<div id="" style="border: 1px solid #ccc;width: 100%;height: 300px;">
		<video width="100%" height="200" controls="" style="border: 1px solid red;" id="media" src="">
			
			<!--<source id="video1" src="">-->
			<!--<source id="video1" src="https://dqplayers.duapp.com/bshare/supurl.php?url=zaWq1nBnYazYrJKam5munmSYp1.pZJaUZG5oZ3BlnA,,&ctype=phone">-->

			<object width="" height="" type="application/x-shockwave-flash" data="myvideo.swf">
				<param name="movie" value="myvideo.swf" />
				<param name="flashvars" value="autostart=true&amp;file=myvideo.swf" />
			</object>
			当前浏览器不支持 video直接播放，点击这里下载视频： <a href="myvideo.webm">下载视频</a>
		</video>
	</div>
		<script>
			mui.init({
				swipeBack: false
			});
			(function($) {
				$('.mui-scroll-wrapper').scroll({
					indicators: false //是否显示滚动条
				});

				$('.mui-input-group').on('change', 'input', function() {
					if (this.checked) {
						sliderSegmentedControl.className = 'mui-slider-indicator mui-segmented-control mui-segmented-control-inverted mui-segmented-control-' + this.value;
						//force repaint
						sliderProgressBar.setAttribute('style', sliderProgressBar.getAttribute('style'));
					}
				});
			})(mui);
			var a = $('.mui-table-view .mui-table-view-cell .mui-media-object').width();
			$('.mui-table-view .mui-table-view-cell .mui-media-object').css({height:a*1.4})
		</script>
</body>
</html>
<script type="text/javascript" charset="utf-8">
      	mui.init();
//B页面onload从服务器获取列表数据；
        window.onload = function(){
            //从服务器获取数据
//http://movie.wxjii.cn
			var href_a;
			mui.ajax("http://movie.wxjii.cn/php/movieU.php",{
				data:{
					aHref:localStorage.aHref,
					type:2
				},
				async:false,
				dataType:'json',
				type:'post',
				timeout:1000,
				success:function(data){
//					console.log(data.data[0].href);//要点击高清链接地址
//              	console.log(localStorage.aHref );//首页传进来的参数
					href_a = data.data[0].href;
					
					
					return href_a;
				}
		
			});
//			console.log(href_a);
			
//			mui.ajax("http://movie.wxjii.cn/php/movieU1.php",{
//				data:{
//					aHref:href_a,
//					type:3
//				},
//				async:false,
//				dataType:'json',
//				type:'post',
//				timeout:1000,
//				success:function(data){
//					href_a = data.data[0].href;
//					return href_a;
//				}
//		
//			});

			mui.ajax("http://movie.wxjii.cn/php/movieU2.php",{
				data:{
					aHref:href_a
				},
				async:false,
				dataType:'json',
				type:'post',
				timeout:1000,
				success:function(data){
					console.log(href_a);

//					console.log(localStorage.aHref);
					for(var i = 0;i<data.Data.length;i++){
						if(data.Data[i].playname=="acfun"){
							$('#media').attr('src',"https://dqplayers.duapp.com/bshare/supurl.php?url="+data.Data[i].playurls[0][1]+"&ctype=phone");
						}
//						if(data.Data[i].playname==""){
//							$('#media').attr('src',"https://dqplayers.duapp.com/bshare/supurl.php?url="+data.Data[i].playurls[0][1]+"&ctype=phone");
//						}
					}
//      			console.log($('#video1').attr('src'));
					
					
				}
		
			});
            //业务数据获取完毕，并已插入当前页面DOM；
            //注意：若为ajax请求，则需将如下代码放在处理完ajax响应数据之后；
//          var aHref;
            mui.plusReady(function(){
                var self = plus.webview.currentWebview();
                var ahref = self.href;
                localStorage.aHref = ahref;

                //关闭等待框
                plus.nativeUI.closeWaiting();
                //显示当前页面
                mui.currentWebview.show();
            });
//              console.log(localStorage.aHref );
            
        }
        
        $(document).ready(function(){
        	
        	console.log($('#video1').attr('src'));
        })

    </script>