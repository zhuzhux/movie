<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
    <title></title>
    <script src="js/mui.min.js"></script>
    <script src="js/jquery.js"></script>
    <link href="css/mui.min.css" rel="stylesheet"/>


    <style>
    	body{max-width: 640px;margin: 0 auto;}
    </style>
    <style>
		.mui-control-content {
			background-color: white;
			min-height: 1015px;
		}
		.mui-control-content .mui-loading {
			margin-top: 50px;
		}
		
		#rUrl>div>div:not(:first-child){
			border-top:1px dashed #ccc;
			margin-top:10px;
			padding-top: 4px;	
		}
	</style>
</head>
<body>
	<header class="mui-bar mui-bar-nav">
	    <a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
	    <h1 class="mui-title"></h1>
	</header>
		<div class="mui-content">
			<div id="" style="width: 100%;height:auto;margin-top: 40px;">
				<video width="100%" height="200" controls="" id="media" src="">
					
					<!--<source id="video1" src="">-->
					<!--<source id="video1" src="https://dqplayers.duapp.com/bshare/supurl.php?url=zaWq1nBnYazYrJKam5munmSYp1.pZJaUZG5oZ3BlnA,,&ctype=phone">-->
		
					<object width="" height="" type="application/x-shockwave-flash" data="myvideo.swf">
						<param name="movie" value="myvideo.swf" />
						<param name="flashvars" value="autostart=true&amp;file=myvideo.swf" />
					</object>
					当前浏览器不支持 video直接播放，点击这里下载视频： <a href="myvideo.webm">下载视频</a>
				</video>
			</div>
			
			<div class="mui-card">
			    <div class="mui-card-content"  id="jieshao">
			      
			    </div>
			</div>
			<div class="mui-card" >
			    <div class="mui-card-content" id="rUrl">
			    </div>
			</div>
			<!--<div id="rUrl">
			</div>-->
			<i id="htmlurl"></i>
		    
		</div>

	
			
	
	<!--<button id="url">点击播放</button>-->
	<!--<video id="videoId" src="http://dqplayers.duapp.com/bshare/Yunflvco/parse.php?url=vH2gnWmwiLuvgK2O3YCZc3Q_youku&ctype=phone" width="100%" height="200" controls="controls">-->
<script>
//	mui.init({
//		swipeBack: false
//	});
//	(function($) {
//		$('.mui-scroll-wrapper').scroll({
//			indicators: false //是否显示滚动条
//		});
//
//		$('.mui-input-group').on('change', 'input', function() {
//			if (this.checked) {
//				sliderSegmentedControl.className = 'mui-slider-indicator mui-segmented-control mui-segmented-control-inverted mui-segmented-control-' + this.value;
//				//force repaint
//				sliderProgressBar.setAttribute('style', sliderProgressBar.getAttribute('style'));
//			}
//		});
//	})(mui);

</script>
</body>
</html>
<script type="text/javascript" charset="utf-8">
      	mui.init();
        window.onload = function(){
            //从服务器获取数据
	//http://movie.wxjii.cn
            //业务数据获取完毕，并已插入当前页面DOM；
            //注意：若为ajax请求，则需将如下代码放在处理完ajax响应数据之后；
            mui.plusReady(function(){
                var self = plus.webview.currentWebview();
                var ahref = self.href;
                var headerTitle = self.title;
                localStorage.aHref = ahref;

				getHtmlUrl();
				$('header h1').text(headerTitle);
				
				//获取真实地址，输出到页面按钮，传递的值是
                getrUrl($('#htmlurl').attr('src'));
                //点击真实地址按钮，自动播放
				clickrUrl();

//				console.log($('#rUrl').html());
				
                //关闭等待框
                plus.nativeUI.closeWaiting();
                
                //显示当前页面
                mui.currentWebview.show();
				//清空aHref
				localStorage.removeItem("aHref");
            });
        }

          
        function getHtmlUrl(){//获取播放页面的地址： http://m.yingshidaquan.cc/play/DQ236764-4-1.html
				mui.ajax("http://movie.wxjii.cn/php/movieU.php",{
					data:{
						aHref:localStorage.aHref,
						type:2
					},
					async:false,
					dataType:'json',
					type:'post',
					timeout:1000,
					success:function(data){
						//赋值给<i>,不显示，用在存储当前视频的第二次详细
						$('#htmlurl').attr('src',data.data[0].href);
						console.log(data)
						console.log()
						var str = '<div class="mui-card-content-inner">';
						for(i = 0;i<data.details.length;i++){
							str += '<div>'+data.details[i].details+'</div>';
						}
						str += '<div>'+data.introduction[0].introduction+'</div></div>';
						$('#jieshao').html(str);
					}
				});
			}
        
		function getrUrl(href_a){
			mui.ajax("http://movie.wxjii.cn/php/movieU2.php",{
				data:{
					aHref:href_a
				},
				async:false,
				dataType:'json',
				type:'post',
				timeout:1000,
				success:function(data){
					var str = '<div class="mui-card-content-inner">';
					for(var i = 0;i<data.Data.length;i++){
						var noPlay = data.Data[i].playname!="xigua"&&data.Data[i].playname!="xigua1"&&data.Data[i].playname!="down1"&&data.Data[i].playname!="down3"&&data.Data[i].playname!="down4"&&data.Data[i].playname!="ed2k"&&data.Data[i].playname!="ffhd"&&data.Data[i].playname!="real"&&data.Data[i].playname!="web9";
						if(noPlay){
							str+='<div><h5 dataTitle='+data.Data[i].playname+'>'+data.Data[i].playname+' 在线播放(点击开始)</h5>';
							for(var j=0;j<data.Data[i].playurls.length;j++){
								str+='<button style="max-width:100%;width:auto;overflow: hidden;text-align: left;" src="'+data.Data[i].playurls[j][1]+'">'+data.Data[i].playurls[j][0]+'</button>';
							}
							str+='</div>'
						}
					}
					str+='</div>'
					$('#rUrl').html(str);
				}
			});
        }
		
		function clickrUrl(){//点击真实地址的按钮
			$('#rUrl>div>div>button').click(function(){
				var dataTitle = $(this).prevAll("h5:first").attr("dataTitle");
				if(dataTitle=="dusk360"){
					$('#media').attr('src',$(this).attr('src'));
					$('#media').attr("autoplay","autoplay");
					mui.toast('正在解析，请稍等..');
				}
				if(dataTitle=="acfun"){
					var str = $(this).attr('src');
					str = str.substr(0, str.indexOf('douban'));
					acfun = "http://dqplayers.duapp.com/bshare/Yunflvsing/parse.php?url="+str+"&ctype=phone";
					$('#media').attr('src',acfun);
					$('#media').attr("autoplay","autoplay");
					mui.toast('正在解析，请稍等..');
				}
				if(dataTitle=="yuku"){
					var str = $(this).attr('src');
					str = str.substr(0, str.indexOf('douban'));
					yuku = "http://dqplayers.duapp.com/bshare/Yunflvsing/parse.php?url="+str+"&ctype=phone";
					$('#media').attr('src',yuku);
					$('#media').attr("autoplay","autoplay");
					mui.toast('正在解析，请稍等..');
				}
				if(dataTitle=="360"){
					var str = $(this).attr('src');
					str = str.substr(0, str.indexOf('douban'));
					s360 = "http://dqplayers.duapp.com/bshare/Yunflvsing/parse.php?url="+str+"_pprid&ctype=phone";
					$('#media').attr('src',s360);
					$('#media').attr("autoplay","autoplay");
					mui.toast('正在解析，请稍等..');
				}
				if(dataTitle=="imgo"){
					var str = $(this).attr('src');
					str = str.substr(0, str.indexOf('douban'));
					imgo = "http://dqplayers.duapp.com/bshare/Yunflvsing/parse.php?url="+str+"_pprid&ctype=phone";
					$('#media').attr('src',imgo);
					$('#media').attr("autoplay","autoplay");
					mui.toast('正在解析，请稍等..');
				}
				if(dataTitle=="qianmo"){
					var str = $(this).attr('src');
					str = str.substr(0, str.indexOf('douban'));
					qianmo = "http://dqplayers.duapp.com/bshare/Yunflvsing/parse.php?url="+str+"_acsid&ctype=phone";
					$('#media').attr('src',qianmo);
					$('#media').attr("autoplay","autoplay");
					mui.toast('正在解析，请稍等..');
				}
				if(dataTitle=="letvid"){
					var str = $(this).attr('src');
					str = str.substr(0, str.indexOf('douban'));
					letid = "http://dqplayers.duapp.com/bshare/Yunflvco/parse.php?url="+str+"_letv&ctype=phone";
					$('#media').attr('src',letid);
					$('#media').attr("autoplay","autoplay");
					mui.toast('正在解析，请稍等..');
				}
				if(dataTitle=="yukuid"){
					var str = $(this).attr('src');
					str = str.substr(0, str.indexOf('douban'));
					yukuid = "http://dqplayers.duapp.com/bshare/Yunflvco/parse.php?url="+str+"_youku&ctype=phone";
					$('#media').attr('src',yukuid);
					$('#media').attr("autoplay","autoplay");
					mui.toast('正在解析，请稍等..');
				}
				if(dataTitle=="qqid"){
					var str = $(this).attr('src');
					str = str.substr(0, str.indexOf('douban'));
					qqid = "http://dqplayers.duapp.com/bshare/Yunflvco/parse.php?url="+str+"_qq&ctype=phone";
					$('#media').attr('src',qqid);
					$('#media').attr("autoplay","autoplay");
					mui.toast('正在解析，请稍等..');
				}
			});
		}
		
    </script>
